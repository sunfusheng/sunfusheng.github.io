I"Œ/<p>ReactiveXç¼–ç¨‹ç®€ç§°Rxç¼–ç¨‹ï¼Œåˆå«å“åº”å¼ç¼–ç¨‹ã€å“åº”å¼æ‰©å±•ï¼Œè‹±æ–‡ä¸ºReactive Extensionsã€‚å¯ä»¥æŸ¥çœ‹å®˜æ–¹ç½‘ç«™<a href="http://www.reactive.io/">www.reactive.io</a>ï¼Œå°±åƒå…¶ç½‘ç«™è¯´çš„â€Expertise makes better software.â€ï¼Œå“åº”å¼ç¼–ç¨‹çš„ç›®æ ‡æ˜¯æä¾›ä¸€è‡´çš„ç¼–ç¨‹æ¥å£ï¼Œ
å¸®åŠ©å¼€å‘è€…æ›´æ–¹ä¾¿çš„å¤„ç†å¼‚æ­¥æ•°æ®æµï¼Œä½¿è½¯ä»¶å¼€å‘æ›´é«˜æ•ˆã€æ›´ç®€æ´ã€‚Rxæ˜¯ä¸€ä¸ªå¤šè¯­è¨€çš„å®ç°ï¼Œå·²ç»æ”¯æŒå¤šç§è¯­è¨€åŒ…æ‹¬Javaã€Swiftã€C++ã€.NETã€JavaScriptã€Rubyã€Groovyã€Scalaç­‰ç­‰ï¼Œæ”¯æŒçš„åº“åŒ…æ‹¬ï¼š<a href="https://github.com/ReactiveX/RxJava">RxJava</a> ã€<a href="https://github.com/ReactiveX/RxSwift">RxSwift</a>ã€Rx.NETã€RxJSã€RXRubyç­‰ç­‰ï¼ŒçœŸæ˜¯å±Œç‚¸å¤©ã€‚åœ¨Androidä¸Šæˆ‘ä»¬æ·»åŠ  <a href="https://github.com/ReactiveX/RxAndroid">RxAndroid</a> åº“å°±å¯ä»¥ï¼Œ<a href="https://github.com/ReactiveX/RxAndroid">RxAndroid</a> æ˜¯å¯¹ <a href="https://github.com/ReactiveX/RxJava">RxJava</a>  ä¸€ç§æ›´æ¥åœ°æ°”çš„æ‰©å±•ã€‚ä¸‹é¢è®©æˆ‘ä»¬é€šè¿‡ <a href="https://github.com/ReactiveX/RxAndroid">RxAndroid</a> å»ä½¿ç”¨ã€ç†è§£ <a href="https://github.com/ReactiveX/RxJava">RxJava</a> å§ã€‚</p>

<h3 id="rxä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼">Rxä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼</h3>

<p>åˆ›å»ºï¼šRxå¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºäº‹ä»¶æµå’Œæ•°æ®æµ<br />
ç»„åˆï¼šRxä½¿ç”¨æŸ¥è¯¢å¼çš„æ“ä½œç¬¦ç»„åˆå’Œå˜æ¢æ•°æ®æµ<br />
ç›‘å¬ï¼šRxå¯ä»¥è®¢é˜…ä»»ä½•å¯è§‚å¯Ÿçš„æ•°æ®æµå¹¶æ‰§è¡Œæ“ä½œ</p>

<h3 id="rxä½¿ä»£ç ç®€åŒ–">Rxä½¿ä»£ç ç®€åŒ–</h3>

<p>å‡½æ•°å¼é£æ ¼ï¼šå¯¹å¯è§‚å¯Ÿæ•°æ®æµä½¿ç”¨æ— å‰¯ä½œç”¨çš„è¾“å…¥è¾“å‡ºå‡½æ•°ï¼Œé¿å…äº†ç¨‹åºé‡Œé”™ç»¼å¤æ‚çš„çŠ¶æ€<br />
ç®€åŒ–ä»£ç ï¼šRxçš„æ“ä½œç¬¦é€šé€šå¸¸å¯ä»¥å°†å¤æ‚çš„éš¾é¢˜ç®€åŒ–ä¸ºå¾ˆå°‘çš„å‡ è¡Œä»£ç <br />
å¼‚æ­¥é”™è¯¯å¤„ç†ï¼šä¼ ç»Ÿçš„try/catchæ²¡åŠæ³•å¤„ç†å¼‚æ­¥è®¡ç®—ï¼ŒRxæä¾›äº†åˆé€‚çš„é”™è¯¯å¤„ç†æœºåˆ¶<br />
è½»æ¾ä½¿ç”¨å¹¶å‘ï¼šRxçš„Observableså’ŒSchedulersè®©å¼€å‘è€…å¯ä»¥æ‘†è„±åº•å±‚çš„çº¿ç¨‹åŒæ­¥å’Œå„ç§å¹¶å‘é—®é¢˜</p>

<h3 id="å…ˆçœ‹ç®€å•çš„ä¾‹å­é€šè¿‡rxjavaå°†integerç±»å‹è½¬æˆstringç±»å‹">å…ˆçœ‹ç®€å•çš„ä¾‹å­ï¼Œé€šè¿‡RxJavaå°†Integerç±»å‹è½¬æˆStringç±»å‹</h3>

<pre><code class="language-Java">    private void funcDemo() {
        Observable.OnSubscribe&lt;Integer&gt; onSubscribe1 = new Observable.OnSubscribe&lt;Integer&gt;() {
            @Override
            public void call(Subscriber&lt;? super Integer&gt; subscriber) {
                subscriber.onNext(100);
            }
        };

        Func1&lt;Integer, String&gt; func1 = new Func1&lt;Integer, String&gt;() {
            @Override
            public String call(Integer integer) {
                return String.valueOf(integer);
            }
        };

        Subscriber&lt;String&gt; subscriber1 = new Subscriber&lt;String&gt;() {
            @Override
            public void onCompleted() {
            }

            @Override
            public void onError(Throwable e) {
            }

            @Override
            public void onNext(String s) {
                Log.d("onNext(): ", s);
            }
        };

        Observable.create(onSubscribe1)
                .map(func1)
                .subscribe(subscriber1);

        // å°†ä¸Šé¢åˆ†è§£æˆä¸‰æ­¥æ‰§è¡Œ
        // Observable&lt;Integer&gt; observable1 = Observable.create(onSubscribe1);
        // Observable&lt;String&gt; observable2 = observable1.map(func1);
        // observable2.subscribe(subscriber1);
    }
</code></pre>

<p>ä¸»è¦å…³æ³¨è¿™é‡Œé¢ç”Ÿæˆçš„å››ä¸ªå¯¹è±¡ï¼šobservable1ã€onSubscribe1ã€func1ã€subscriber1ï¼Œå¦‚æœå¯¹ç›¸åº”çš„å•è¯ä¸æ¸…æ™°ï¼Œç§»æ­¥ä¸‹é¢çš„å¤‡æ³¨ã€‚<br />
è¿™æ˜¯å…¸å‹çš„çš„è¢«è§‚å¯Ÿè€…ä¸è§‚å¯Ÿè€…çš„å…³ç³»ï¼Œæˆ–è€…å«è¢«è®¢é˜…è€…ä¸è®¢é˜…è€…çš„å…³ç³»ï¼›ä¸‹é¢ç†ä¸€ä¸‹ä»–ä»¬çš„è§’è‰²ï¼š</p>

<pre><code class="language-Java">    observable1ï¼šè¢«è§‚å¯Ÿè€…ï¼Œæ˜¯subscriber1è¦è®¢é˜…çš„å¯¹è±¡ã€‚  
    onSubscribe1ï¼šè¢«è§‚å¯Ÿè€…çš„è¡Œä¸ºï¼Œæ˜¯subscriber1è¦è®¢é˜…çš„è¡Œä¸ºï¼Œsubscribe()æ—¶è¢«æ‰§è¡Œã€‚  
    subscriber1ï¼šè®¢é˜…è€…ï¼Œæ˜¯æŠ½è±¡ç±»å®ç°äº†Observeræ¥å£ï¼Œå¯ä»¥å«è§‚å¯Ÿè€…ï¼Œå…¶å®å°±æ˜¯è§‚å¯Ÿè€…çš„è§’è‰²ã€‚

    // åˆ†è§£æˆä¸‰æ­¥æ‰§è¡Œçš„ä»£ç 
    Observable&lt;Integer&gt; observable1 = Observable.create(onSubscribe1);
    Observable&lt;String&gt; observable2 = observable1.map(func1);
    observable2.subscribe(subscriber1);
</code></pre>

<p>è¿™æ®µä»£ç çš„æ„æ€å°±æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªè¢«è§‚å¯Ÿè€…observable1ï¼Œç»™è¢«è§‚å¯Ÿè€…æŒ‡å®šå…¶æ‰€å‘å¸ƒçš„è¡Œä¸ºï¼ˆonSubscribe1æ¥å®ç°ï¼‰ï¼›
æŒ‡å®šè§‚å¯Ÿè€…æ—¶ï¼Œåªéœ€æŒ‡å®šç›¸åº”çš„è§‚å¯Ÿå›è°ƒå³å¯ï¼›åœ¨å®Œæˆè®¢é˜…çš„æ“ä½œæ—¶ï¼Œæ˜¯å…ˆè°ƒç”¨subscriber1çš„onStartæ–¹æ³•ï¼Œ
ä¹‹åé€šè¿‡è®¢é˜…è¡Œä¸ºonSubscribe1æ¥è°ƒç”¨subscriber1å®Œæˆç›¸åº”çš„è®¢é˜…æ“ä½œï¼›æœ€åè‹¥å‡ºç°å¼‚å¸¸åˆ™ä¼šå›è°ƒsubscriber1çš„onErroræ–¹æ³•ã€‚</p>

<p>æ¢å¥è¯è¯´å°±æ˜¯ï¼šè¢«è§‚å¯Ÿè€…å‘å¸ƒçš„è¡Œä¸ºæ˜¯ä¼ é€’Integerç±»å‹çš„æ•°å€¼100ï¼Œmap()å˜æ¢åï¼Œè§‚å¯Ÿè€…æ”¶åˆ°äº†Stringç±»å‹çš„å­—ç¬¦ä¸²â€100â€ã€‚</p>

<p>ç®€å•ç‚¹è¯´å°±æ˜¯ï¼šè§‚å¯Ÿè€…è®¢é˜…äº†è¢«è§‚å¯Ÿè€…è¦å‘å¸ƒçš„è¡Œä¸ºã€‚</p>

<p><a href="https://github.com/sunfusheng/Tuling">æºç å‚è€ƒä¸ªäººä½œå“ã€å›¾çµæœºå™¨äººã€‘</a></p>

<p>ç°åœ¨ç»“åˆæºç ï¼Œä¸€æ­¥æ­¥çœ‹å®ƒåˆ°åº•æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼</p>

<h3 id="ç¬¬ä¸€æ­¥-observablecreateonsubscribe1">ç¬¬ä¸€æ­¥ Observable.create(onSubscribe1)</h3>

<pre><code class="language-Java">    public static &lt;T&gt; Observable&lt;T&gt; create(OnSubscribe&lt;T&gt; f) {
        return new Observable&lt;T&gt;(hook.onCreate(f));
    }

    protected Observable(OnSubscribe&lt;T&gt; f) {
        this.onSubscribe = f;
    }
</code></pre>

<p>è¿™é‡Œé¢æ³›å‹æ¯”è¾ƒå¤šï¼Œå…ˆå¿½ç•¥<T>æ³›å‹ç¬¦å·ï¼›hookåˆæ˜¯ä»€ä¹ˆä¸œä¸œï¼Ÿç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œé’©å­â€ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆé’©å­å‘¢ï¼ŒæŸ¥çœ‹æºç åçŸ¥é“, `hook` æ˜¯ä¸€ä¸ª proxy å¯¹è±¡, ä»…ä»…ç”¨ä½œè°ƒè¯•çš„æ—¶å€™å¯ä»¥æ’å…¥ä¸€äº›æµ‹è¯•ä»£ç çš„ï¼Œé‚£ä¹Ÿå…ˆå¿½ç•¥ã€‚</T></p>

<p>æ‰€ä»¥Observable.create(onSubscribe1)å¹²äº†ä¸¤ä»¶äº‹ï¼Œç¬¬ä¸€ new ä¸€ä¸ª observable1 å¯¹è±¡ï¼Œç¬¬äºŒå°† new å‡ºçš„ onSubscribe1 å¯¹è±¡é€šè¿‡ Observable çš„æ„é€ å‡½æ•°èµ‹å€¼ç»™å®ƒçš„æˆå‘˜å˜é‡ onSubscribeã€‚</p>

<h3 id="ç¬¬äºŒæ­¥-observable1mapfunc1">ç¬¬äºŒæ­¥ observable1.map(func1)</h3>

<p>å…ˆçœ‹func1å¯¹è±¡ï¼ŒRxJavaæœ‰ä¸€ç³»åˆ—çš„(Func+æ•°å­—)çš„æ¥å£å’Œä¸€ç³»åˆ—(Action+æ•°å­—)æ¥å£ï¼Œè¿™äº›æ¥å£ä¸­éƒ½åªæœ‰ä¸€ä¸ªcallæ–¹æ³•ï¼Œå…¶ä¸­(Func+æ•°å­—)æ¥å£çš„callæ–¹æ³•éƒ½æœ‰è¿”å›å€¼ï¼Œè€Œ(Action+æ•°å­—)æ¥å£çš„callæ–¹æ³•éƒ½æ²¡æœ‰è¿”å›å€¼ï¼Œåé¢çš„é‚£ä¸ªæ•°å­—è¡¨ç¤ºcallæ–¹æ³•æ¥å—å‡ ä¸ªæ³›å‹ç±»å‹çš„å‚æ•°ã€‚çœ‹ä¸€ä¸‹Func1å’ŒAction1çš„æºç ï¼š</p>

<pre><code class="language-Java">    /**
     * Represents a function with one argument.
     */
    public interface Func1&lt;T, R&gt; extends Function {
        R call(T t);
    }

    /**
     * A one-argument action.
     */
    public interface Action1&lt;T&gt; extends Action {
        void call(T t);
    }
</code></pre>

<p>Func1 å’Œ Actionï¼ˆAction1ç»§æ‰¿Actionï¼‰ éƒ½ç»§æ‰¿ Function æ¥å£ï¼ŒFunc1 æ¥æ”¶ä¸€ä¸ª T æ³›å‹ç±»å‹çš„å‚æ•°ï¼Œcall å›è°ƒåï¼Œè¿”å›ä¸€ä¸ª R æ³›å‹ç±»å‹çš„å€¼ï¼Œæ˜¯ä¸€ç§â€œå˜æ¢â€å‡½æ•°æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ call å›è°ƒä¸­å¤„ç†è¿™ç§â€œå˜æ¢â€çš„éœ€æ±‚ã€‚<br />
æ¥ä¸‹æ¥çœ‹çœ‹ map(func1) å¹²äº†ç¥é©¬ï¼Œä¸Šæºç ã€‚ã€‚ã€‚</p>

<pre><code class="language-Java">    public final &lt;R&gt; Observable&lt;R&gt; map(Func1&lt;? super T, ? extends R&gt; func) {
        return lift(new OperatorMap&lt;T, R&gt;(func));
    }

    public final &lt;R&gt; Observable&lt;R&gt; lift(final Operator&lt;? extends R, ? super T&gt; operator) {
        return new Observable&lt;R&gt;(new OnSubscribe&lt;R&gt;() {
            @Override
            public void call(Subscriber&lt;? super R&gt; o) {
                // æ ¸å¿ƒä»£ç 
                Subscriber&lt;? super T&gt; subscriber2 = hook.onLift(operator).call(o);
                subscriber2.onStart();
                onSubscribe1.call(subscriber2);
            }
        });
    }
</code></pre>

<p>map()å‡½æ•°é‡Œç›´æ¥è°ƒç”¨çš„lift()å‡½æ•°ï¼Œå…ˆçœ‹çœ‹OperatorMapå’Œlift()å‡½æ•°çš„å‚æ•°Operatoræ˜¯ä»€ä¹ˆç©æ„ï¼Œå†ä¸Šæºç ã€‚ã€‚ã€‚</p>

<pre><code class="language-Java">    /**
     * Operator function for lifting into an Observable.
     */
    public interface Operator&lt;R, T&gt; extends Func1&lt;Subscriber&lt;? super R&gt;, Subscriber&lt;? super T&gt;&gt; {
        // cover for generics insanity
    }

    public final class OperatorMap&lt;T, R&gt; implements Operator&lt;R, T&gt; {

        final Func1&lt;? super T, ? extends R&gt; transformer;

        public OperatorMap(Func1&lt;? super T, ? extends R&gt; transformer) {
            this.transformer = transformer;
        }

        @Override
        public Subscriber&lt;? super T&gt; call(final Subscriber&lt;? super R&gt; o) {
            return new Subscriber&lt;T&gt;(o) {
                @Override
                public void onCompleted() {
                    o.onCompleted();
                }
                @Override
                public void onError(Throwable e) {
                    o.onError(e);
                }
                @Override
                public void onNext(T t) {
                    o.onNext(transformer.call(t));
                }
            };
        }
    }
</code></pre>

<p>Operator ç»§æ‰¿ Func1ï¼ŒOperator å’Œ Func1 éƒ½æ˜¯ä¸€ç§â€œå˜æ¢â€æ¥å£ï¼Œæ¯”å¦‚è¾“å…¥Integerç±»å‹å‚æ•°ç»è¿‡å¤„ç†è¿”å›Stringç±»å‹å€¼ï¼Œ
OperatorMap ç»§æ‰¿ Operatorï¼Œä½†å®ƒçš„å‚æ•°åˆå’ŒOperatorç›¸åï¼Œéš¾é“ç»è¿‡OperatorMapåˆæŠŠStringç±»å‹å˜æ¢æˆIntegerç±»å‹å€¼å•¦ï¼Œ
å…¶å® OperatorMap ç±»æœ‰ä¸ªFunc1å±æ€§transformerï¼ˆtransformerå°±æ˜¯func1ï¼‰ï¼Œæ‰§è¡Œo.onNext(transformer.call(t))å°±å°†func1å˜æ¢çš„ç»“æœä¼ é€’ä¸‹å»äº†ã€‚</p>

<p>lift()è¿”å›çš„æ˜¯ä¸ªæ–°çš„è¢«è§‚å¯Ÿè€…å¯¹è±¡observable2ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„OnSubscribeå¯¹è±¡ï¼Œæš‚æ—¶æ ‡è®°ä¸ºonSubscribe2ï¼›
åœ¨onSubscribe2å›è°ƒä¸­è°ƒç”¨hook.onLift(operator).call(o)ï¼Œå˜æ¢åå¹¶ç”Ÿæˆæ–°çš„è§‚å¯Ÿè€…subscriber2å¯¹è±¡ï¼Œ
æ–°çš„è§‚å¯Ÿè€…subscriber2å¯¹è±¡è¢«ç»‘å®šåˆ°åŸæ¥åˆ›å»ºonSubscribe1å¯¹è±¡ä¸Šï¼Œå¯ä»¥ç†è§£ä¸ºsubscriber2å·²ç»è®¢é˜…åˆ°ç»è¿‡å˜æ¢åçš„
observable1è¦å‘å¸ƒçš„è¡Œä¸ºï¼Œæœ€åè¿™ç§å˜åŒ–åçš„è¡Œä¸ºç»§ç»­è¢«å‘é€åˆ°subscriber1è§‚å¯Ÿè€…é‚£é‡Œã€‚</p>

<h3 id="æœ€åä¸€æ­¥-subscribesubscriber1">æœ€åä¸€æ­¥ subscribe(subscriber1)</h3>

<p>subscriber1å¼€å§‹è®¢é˜…è¢«è§‚å¯Ÿè€…çš„è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥è¯´è¢«è§‚å¯Ÿè€…çš„è¡Œä¸ºsubscribe()æ—¶è¢«æ‰§è¡Œï¼›æˆ‘ä»¬å¯ä»¥åœ¨è§‚å¯Ÿè€…çš„å›è°ƒä¸­å¤„ç†æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„ç»“æœï¼› 
åœ¨æ‰§è¡Œè®¢é˜…åè¿”å›äº†Subscriptionå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š</p>

<pre><code class="language-Java">    public interface Subscription {
        // å–æ¶ˆè®¢é˜…
        void unsubscribe();
        // è®¢é˜…æ˜¯å¦è¢«å–æ¶ˆ
        boolean isUnsubscribed();
    }
</code></pre>

<p>æœ€åæ€»ç»“ä¸‹å§ï¼Œä¸ºäº†äº†è§£RxJavaçš„è¿è¡Œæœºåˆ¶ï¼›æˆ‘ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ç°çš„åŠŸèƒ½å°±æ˜¯é€šè¿‡RxJavaå°†Integerç±»å‹è½¬æˆStringç±»å‹å¹¶æ‰“å°å‡ºæ¥ï¼Œå¹¶ç»“åˆæºç ç†è§£å…¶æ‰§è¡Œè¿‡ç¨‹ï¼›è¿™é‡Œé¢æ³›å‹ã€æ¥å£çš„å›è°ƒå’Œå„ç§è§’è‰²çš„å˜æ¢ç¡®å®ä¸å¥½ç†è§£ï¼›æ¥ä¸‹æ¥æˆ‘ä¼šå°†RxJavaå’ŒRetrofit2ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œ
æ‰€ä»¥<a href="https://github.com/sfsheng0322/Tuling">ã€å›¾çµæœºå™¨äººã€‘</a>å°±è¿™æ ·äº§ç”Ÿå•¦ã€‚</p>

<h3 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« ï¼š</h3>
<p><a href="http://diordna.sinaapp.com/?p=896">å½»åº•ææ‡‚ RxJava â€” åŸºç¡€ç¯‡</a><br />
<a href="http://diordna.sinaapp.com/?p=910">å½»åº•ææ‡‚ RxJava â€” ä¸­çº§ç¯‡</a><br />
<a href="http://diordna.sinaapp.com/?p=912">å½»åº•ææ‡‚ RxJava â€” é«˜çº§ç¯‡</a></p>

<p><a href="http://blog.csdn.net/lzyzsd">å¤§å¤´é¬¼Bruce</a>  <br />
<a href="http://blog.csdn.net/lzyzsd/article/details/50110355">RxJavaåŸºæœ¬æµç¨‹å’Œliftæºç åˆ†æ</a></p>

<p><a href="https://github.com/rengwuxian">æ‰”ç‰©çº¿</a> <br />
<a href="http://gank.io/post/560e15be2dca930e00da1083">ç»™ Android å¼€å‘è€…çš„ RxJava è¯¦è§£</a></p>

<h3 id="å¤‡æ³¨">å¤‡æ³¨ï¼š</h3>
<p>observableï¼š<br />
adj. æ˜¾è‘—çš„ï¼›è§‰å¯Ÿå¾—åˆ°çš„ï¼›çœ‹å¾—è§çš„<br />
n. [ç‰©] å¯è§‚å¯Ÿé‡ï¼›æ„Ÿè§‰åˆ°çš„äº‹ç‰©</p>

<p>observerï¼š<br />
n. è§‚å¯Ÿè€…ï¼›[å¤©] è§‚æµ‹è€…ï¼›éµå®ˆè€…</p>

<p>subscribeï¼š<br />
vi. è®¢é˜…ï¼›ææ¬¾ï¼›è®¤è´­ï¼›èµæˆï¼›ç­¾ç½²<br />
vt. ç­¾ç½²ï¼›èµæˆï¼›æåŠ©</p>

<p>subscriberï¼š<br />
n. è®¢æˆ·ï¼›ç­¾ç½²è€…ï¼›æçŒ®è€…</p>

:ET